(this.webpackJsonpsolvarg=this.webpackJsonpsolvarg||[]).push([[0],{14:function(t,e,i){},15:function(t,e,i){"use strict";i.r(e);var n,s=i(6),a=(i(5),i(7)),o=i.n(a),r=(i(14),function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,19)).then((function(e){var i=e.getCLS,n=e.getFID,s=e.getFCP,a=e.getLCP,o=e.getTTFB;i(t),n(t),s(t),a(t),o(t)}))}),h=i(0),c=i(1),u=i(3),l=i(2),v=i(16),d=i(17),f=i(18),y=function(){function t(){Object(h.a)(this,t)}return Object(c.a)(t,null,[{key:"Sum",value:function(t){try{return Object(v.a)(t)}catch(e){return-1}}},{key:"GetAverage",value:function(t){try{return Object(d.a)(t)}catch(e){return-1}}},{key:"Sqrt",value:function(t){return Math.sqrt(t)}},{key:"Clamp",value:function(t,e,i){return Object(f.a)(t,e,i)}},{key:"Absf",value:function(t){return Math.abs(t)}}]),t}(),p=function(){function t(e,i){Object(h.a)(this,t),this.x=void 0,this.y=void 0,this.x=e||1,this.y=i||1}return Object(c.a)(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"set",value:function(t,e){this.x=t,this.y=e}},{key:"equal",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"scale",value:function(t){this.x*=t,this.y*=t}},{key:"scaleAndAdd",value:function(t,e){this.x+=t.x*e,this.y+=t.y*e}},{key:"scaleXY",value:function(t){this.x*=t.x,this.y*=t.y}},{key:"scaleXYAndAdd",value:function(t,e){this.x+=t.x*e.x,this.y+=t.y*e.y}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"len",value:function(){return y.Sqrt(this.lenSquare())}},{key:"lenSquare",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){var t=this.len();return this.x/=t,this.y/=t,this}},{key:"distance",value:function(t){return y.Sqrt(this.distanceSquare(t))}},{key:"distanceSquare",value:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i}},{key:"negate",value:function(){this.x=-this.x,this.y=-this.y}}],[{key:"lerp",value:function(e,i,n){var s=1-n,a=new t(0,0);return a.x=s*e.x+n*i.x,a.y=s*e.y+n*i.y,a}}]),t}(),k=function(){function t(){Object(h.a)(this,t),this._position=void 0,this.rotation=void 0,this.localScale=void 0,this.localPosition=void 0,this.root=this,this.childs=void 0,this._parent=this,this._position=new p,this.rotation=new p,this.localScale=new p,this.localPosition=new p,this.childs=new Array}return Object(c.a)(t,[{key:"AddChild",value:function(t){this.childs.push(t)}},{key:"RemoveChild",value:function(t){var e=this.childs.indexOf(t);e>-1&&this.childs.splice(e,1)}},{key:"parent",set:function(t){t!=this._parent&&(this._parent!=this&&this._parent.RemoveChild(this),this._parent=t,t.AddChild(this))},get:function(){return this._parent}},{key:"position",get:function(){return this._position},set:function(t){this._position=t}}]),t}(),g=function t(e,i,s){Object(h.a)(this,t),this.type=void 0,this.transform=void 0,this.spriteLayer=void 0,this.transform=new k,this.type=n.None,this.spriteLayer=new p(e||0,i||0),this.transform.parent=s||this.transform};!function(t){t[t.None=0]="None",t[t.Square=1]="Square",t[t.Circle=2]="Circle",t[t.Rect=3]="Rect",t[t.Custome=4]="Custome"}(n||(n={}));var w,b=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(t,n,s,a,o){var r;return Object(h.a)(this,i),(r=e.call(this,s,a,o))._rectInfo=void 0,r._rectInfo=new p(t,n),r}return Object(c.a)(i,[{key:"draw",value:function(t){t.strokeRect(this.transform.position.x,this.transform.position.y,this.rectInfo.x,this.rectInfo.y)}}]),Object(c.a)(i,[{key:"rectInfo",get:function(){var t=this._rectInfo.clone();return t.scaleXY(this.transform.localScale),t}}]),i}(g),m=function(){function t(){Object(h.a)(this,t)}return Object(c.a)(t,[{key:"Bezier",value:function(t,e){if(e.length<2)return e[0];for(var i=new Array,n=0;n<e.length-1;++n){var s=e[n].clone();s.scale(1-t),s.scaleAndAdd(e[n+1],t),i.push(s)}return this.Bezier(t,i)}}]),t}(),_=function t(e){Object(h.a)(this,t),this.id=-1,this.enabled=!1,this.callback=void 0,this.callbackData=void 0,this.countdown=0,this.timeout=0,this.onlyOnce=!1,this.callback=e},O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(h.a)(this,t),this.values=void 0,this.values=new Float32Array([e,i])}return Object(c.a)(t,[{key:"toString",value:function(){return"[".concat(this.values[0],",").concat(this.values[1],"]")}},{key:"x",get:function(){return this.values[0]},set:function(t){this.values[0]=t}},{key:"y",get:function(){return this.values[1]},set:function(t){this.values[0]=t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e,i)}}]),t}();!function(t){t[t.MOUSEEVENT=0]="MOUSEEVENT",t[t.MOUSEDOWN=1]="MOUSEDOWN",t[t.MOUSEUP=2]="MOUSEUP",t[t.MOUSEMOVE=3]="MOUSEMOVE",t[t.MOUSEDRAG=4]="MOUSEDRAG",t[t.KEYBOARDEVENT=5]="KEYBOARDEVENT",t[t.KEYUP=6]="KEYUP",t[t.KEYDOWN=7]="KEYDOWN",t[t.KEYPRESS=8]="KEYPRESS"}(w||(w={}));var x=function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.MOUSEEVENT;Object(h.a)(this,t),this.altKey=void 0,this.ctrlKey=void 0,this.shiftKey=void 0,this.type=void 0,this.altKey=e,this.ctrlKey=i,this.shiftKey=n,this.type=s},E=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(t,n){var s,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(h.a)(this,i),(s=e.call(this,a,o,r)).button=void 0,s.canvasPosition=void 0,s.localPosition=void 0,s.canvasPosition=t,s.button=n,s.localPosition=O.create(),s}return i}(x),T=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(t,n,s){var a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return Object(h.a)(this,i),(a=e.call(this,o,r,c,w.KEYBOARDEVENT)).key=void 0,a.keyCode=void 0,a.repeat=void 0,a.key=t,a.keyCode=n,a.repeat=s,a}return i}(x),j=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(t){var n;Object(h.a)(this,i);var s=t;(n=e.call(this,s)).context2D=void 0,n.context2D=n.canvas.getContext("2d");n.canvas.height=768,n.canvas.width=1024;return null!=n.context2D&&(n.context2D.fillStyle="#53B7F6"),n}return i}(function(){function t(e){Object(h.a)(this,t),this._start=!1,this._appId=1,this._lastTime=void 0,this._startTime=void 0,this._fps=0,this.canvas=void 0,this.isSupportMouseMove=void 0,this._isMouseDown=void 0,this.timers=[],this._timerId=-1,this.canvas=e,this.canvas.addEventListener("mousedown",this,!1),this.canvas.addEventListener("mouseup",this,!1),this.canvas.addEventListener("mousemove",this,!1),window.addEventListener("keydown",this,!1),window.addEventListener("keyup",this,!1),window.addEventListener("keypress",this,!1),this.isSupportMouseMove=!1,this._isMouseDown=!1}return Object(c.a)(t,[{key:"stop",value:function(){this._start&&(cancelAnimationFrame(this._appId),this._appId=-1,this._lastTime=-1,this._startTime=-1,this._start=!1)}},{key:"isRunning",value:function(){return this._start}},{key:"start",value:function(){this._start||(this._start=!0,this._appId=-1,this._lastTime=-1,this._startTime=-1,this._appId=requestAnimationFrame(this.step.bind(this)))}},{key:"step",value:function(t){var e=this;-1===this._startTime&&(this._startTime=t),-1===this._lastTime&&(this._lastTime=t);var i=t-this._startTime,n=t-this._lastTime;0!==n&&(this._fps=1e3/n),n/=1e3,this._lastTime=t,this._handleTimers(n),this.Update(i,n),this.Render(),this._appId=requestAnimationFrame((function(t){e.step(t)}))}},{key:"Update",value:function(t,e){}},{key:"Render",value:function(){}},{key:"handleEvent",value:function(t){switch(t.type){case"mousedown":this._isMouseDown=!0,this.dispatchMouseDown(this._toCanvasMouseEvent(t));break;case"mouseup":this._isMouseDown=!1,this.dispatchMouseUp(this._toCanvasMouseEvent(t));break;case"mousemove":this.isSupportMouseMove&&this.dispatchMouseMove(this._toCanvasMouseEvent(t)),this._isMouseDown&&this.dispatchMouseDrag(this._toCanvasMouseEvent(t));break;case"keypress":this.dispatchKeyPress(this._toCanvasKeyBoardEvent(t));break;case"keydown":this.dispatchKeyDown(this._toCanvasKeyBoardEvent(t));break;case"keyUp":this.dispatchKeyUp(this._toCanvasKeyBoardEvent(t))}}},{key:"dispatchMouseDown",value:function(t){}},{key:"dispatchMouseUp",value:function(t){}},{key:"dispatchMouseMove",value:function(t){}},{key:"dispatchMouseDrag",value:function(t){}},{key:"dispatchKeyPress",value:function(t){}},{key:"dispatchKeyDown",value:function(t){}},{key:"dispatchKeyUp",value:function(t){}},{key:"_viewportToCanvasCoordinate",value:function(t){if(this.canvas){var e=this.canvas.getBoundingClientRect();if("mousedown"===t.type&&console.log("boundingClientRect: ".concat(JSON.stringify(e),",clientX: ").concat(t.clientX,", clientY: ").concat(t.clientY)),t.target){var i=0,n=0,s=0,a=0,o=window.getComputedStyle(t.target),r=o.borderLeftWidth;null!==r&&(i=parseInt(r,10)),null!==(r=o.borderTopWidth)&&(n=parseInt(r,10)),null!==(r=o.paddingLeft)&&(s=parseInt(r,10)),null!==(r=o.paddingTop)&&(a=parseInt(r,10));var h=t.clientX-e.left-i-s,c=t.clientY-e.top-n-a;return O.create(h,c)}throw new Error("canvas is null.")}throw new Error("canvas is null.")}},{key:"_toCanvasMouseEvent",value:function(t){var e=t,i=this._viewportToCanvasCoordinate(e);return new E(i,e.button,e.altKey,e.ctrlKey,e.shiftKey)}},{key:"_toCanvasKeyBoardEvent",value:function(t){var e=t;return new T(e.key,e.keyCode,e.repeat,e.altKey,e.ctrlKey,e.shiftKey)}},{key:"_handleTimers",value:function(t){if(!(this.timers.length<=0))for(var e=0;e<this.timers.length;++e){var i=this.timers[e];!1!==i.enabled&&(i.countdown-=t,i.countdown<=0&&(i.callback(i.id,i.callbackData),!1===i.onlyOnce?i.countdown=i.timeout:i.enabled=!1))}}},{key:"addTimer",value:function(t){for(var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=0;a<this.timers.length;a++){var o=this.timers[a];if(!1===o.enabled)return o.callback=t,o.callbackData=s,o.timeout=i,o.countdown=i,o.enabled=!0,o.onlyOnce=n,o.id}return(e=new _(t)).callbackData=s,e.timeout=i,e.countdown=i,e.enabled=!0,e.onlyOnce=n,e.id=++this._timerId,this.timers.push(e),e.id}},{key:"removeTimer",value:function(t){for(var e=!1,i=0;i<this.timers.length;i++)if(this.timers[i].id===t){this.timers[i].enabled=!1,e=!0;break}return e}},{key:"fps",get:function(){return this._fps}}]),t}()),M=function(){function t(){Object(h.a)(this,t)}return Object(c.a)(t,null,[{key:"createInstance",value:function(t,e){return new t(e)}}]),t}(),S=function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"red";null!==t&&(t.save(),t.fillStyle=s,t.beginPath(),t.arc(e,i,n,0,2*Math.PI),t.fill(),t.restore())},D=function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#fff",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"left",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"middle",r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"14px sans-serif";null!==t&&(t.save(),t.textAlign=a,t.textBaseline=o,t.font=r,t.fillStyle=s,t.fillText(e,i,n),t.restore())},C=function(t,e,i,n,s){null!==t&&(t.beginPath(),t.moveTo(e,i),t.lineTo(n,s),t.stroke())},K=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(t){var n;return Object(h.a)(this,i),(n=e.call(this,t)).bezier=void 0,n.point=void 0,n.perFrame=void 0,n.direction=void 0,n.progress=void 0,n.draw_=void 0,n.counter=void 0,n.Title="\u3061\u3087\u3046\u3000\u3076\u3093\u3000\u3068\u3046",n.rectSprite=void 0,n.bezier=new m,n.point=new p(40,40),n.perFrame=2e3,n.direction=!0,n.progress=0,n.draw_=!0,n.counter=0,n.addTimer((function(t,e){n.draw_=!n.draw_}),.65,!1,null),n.addTimer((function(t,e){n.counter=(n.counter+1)%n.Title.length}),.5,!1,null),n.rectSprite=new b(50,80),n}return Object(c.a)(i,[{key:"Render",value:function(){if(this.drawBackground(),this.drawText("\u6d6a\u8ff9\u5929\u6daf\u7684\u7ec8\u6781\u65e0\u654c\u6253\u5de5\u4ed4ZWT\u53c2\u4e0a!",500,10,"top","center",40,!1),this.drawText("\u9732\u5982\u5fae\u9730\u4e0b\u524d\u6c60\uff0c\u6708\u8fc7\u56de\u5858\u4e07\u7af9\u60b2\u3002",500,80,"top","center",20,!1),this.drawText("\u6d6e\u4e16\u672c\u6765\u591a\u805a\u6563\uff0c\u7ea2\u8556\u4f55\u4e8b\u4ea6\u79bb\u62ab\u3002",500,110,"top","center",20,!1),this.drawText("\u60a0\u626c\u5f52\u68a6\u60df\u706f\u89c1\uff0c\u6fe9\u843d\u751f\u6daf\u72ec\u9152\u77e5\u3002",500,140,"top","center",20,!1),this.drawText("\u5c82\u5230\u767d\u5934\u957f\u53ea\u5c14\uff0c\u5d69\u9633\u677e\u96ea\u6709\u5fc3\u671f\u3002",500,170,"top","center",20,!1),this.drawText("---\u300a\u4e03\u6708\u4e8c\u5341\u4e5d\u65e5\u5d07\u8ba9\u5b85\u5bb4\u4f5c\u300b",550,210,"top","center",15,!1),null!==this.context2D)for(var t=0;t<=this.counter;++t){var e=80*(t-this.Title.length)+this.context2D.canvas.width-75*this.Title.length;this.drawText(this.Title[t],e,0,"middle","center",70,!0)}this.draw_&&this.drawText("____")}},{key:"drawText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:140,o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(null!==this.context2D){var r=this.context2D,h=0,c=0;o&&(h=.5*r.canvas.width,c=.5*r.canvas.height),D(r,t,h+e,c+i,"#000",s,n,a+"px sans-serif")}}},{key:"drawBackground",value:function(){var t=this.context2D;null!==t&&(t.lineWidth=10,t.strokeRect(75,100,200,200),t.fillRect(325,100,200,200),t.clearRect(0,0,t.canvas.width,t.canvas.height),S(t,this.point.x,this.point.y,10,"green"),function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(null!==t){t.save(),t.strokeStyle=e,t.lineWidth=.5;for(var n=i+.5;n<t.canvas.width;n+=i)C(t,n,0,n,t.canvas.height);for(var s=i+.5;s<t.canvas.height;s+=i)C(t,0,s,t.canvas.width,s);t.restore()}}(t,"#333",15),S(t,200,200,80,"rgb("+255*this.progress+","+(255-255*this.progress)+",100)"),this.rectSprite.draw(t))}},{key:"Update",value:function(t,e){this.direction=0===(t/this.perFrame&1),this.progress=t%this.perFrame/this.perFrame,this.direction||(this.progress=1-this.progress);var i=this.bezier.Bezier(this.progress,[new p(.86,0),new p(.07,1),new p(.52,.52),new p(.74,.32)]);this.point.x=800*i.x+60,this.point.y=600*i.y+60;var n=new p(15,1);n.scale(this.direction?1:-1),this.rectSprite.transform.position.scaleXYAndAdd(n,i)}},{key:"dispatchMouseDown",value:function(t){console.log("\u9f20\u6807\u6309\u4e0b",t)}},{key:"dispatchKeyPress",value:function(t){console.log("\u6309\u952e",t)}}]),i}(j),A=function(){function t(){Object(h.a)(this,t),this.canvas=void 0,this.app=void 0,this.run.bind(this),this.canvas=document.getElementById("canvas")}return Object(c.a)(t,[{key:"run",value:function(){null!==this.canvas&&(this.app=M.createInstance(K,this.canvas),this.app.start())}}]),t}(),I=Object(s.jsx)("div",{className:"playground",children:Object(s.jsx)("canvas",{id:"canvas"})});o.a.render(I,document.getElementById("root")),(new A).run(),r()}},[[15,1,2]]]);
//# sourceMappingURL=main.c9c2f581.chunk.js.map